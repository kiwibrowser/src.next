# Copyright 2014 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/android/config.gni")
import("//build/config/android/rules.gni")
import("//build/config/locales.gni")
import("//device/vr/buildflags/buildflags.gni")
import("//tools/grit/grit_rule.gni")

android_aidl("common_aidl") {
  interface_file = "java/src/org/chromium/content/common/common.aidl"
  import_include = [ "java/src" ]
  sources = [ "java/src/org/chromium/content/common/IGpuProcessCallback.aidl" ]
}

android_aidl("is_ready_to_pay_service_aidl") {
  interface_file = "java/src/org/chromium/payments_common.aidl"
  sources = [
    "java/src/org/chromium/IsReadyToPayService.aidl",
    "java/src/org/chromium/IsReadyToPayServiceCallback.aidl",
  ]
}

android_resources("content_java_resources") {
  deps = [
    ":content_strings_grd",
    "//ui/android:ui_java_resources",
  ]
  sources = [
    "java/res/drawable-hdpi/ic_menu_share_holo_light.png",
    "java/res/drawable-hdpi/ic_search.png",
    "java/res/drawable-mdpi/ic_menu_share_holo_light.png",
    "java/res/drawable-mdpi/ic_search.png",
    "java/res/drawable-xhdpi/ic_menu_share_holo_light.png",
    "java/res/drawable-xhdpi/ic_search.png",
    "java/res/drawable-xxhdpi/ic_menu_share_holo_light.png",
    "java/res/drawable-xxhdpi/ic_search.png",
    "java/res/drawable-xxxhdpi/ic_menu_share_holo_light.png",
    "java/res/drawable-xxxhdpi/ic_search.png",
    "java/res/drawable/floating_popup_background.xml",
    "java/res/layout-land/date_time_picker_dialog.xml",
    "java/res/layout/date_time_picker_dialog.xml",
    "java/res/layout/date_time_suggestion.xml",
    "java/res/layout/multi_field_time_picker_dialog.xml",
    "java/res/layout/text_edit_suggestion_container.xml",
    "java/res/layout/text_edit_suggestion_item.xml",
    "java/res/layout/text_edit_suggestion_list_footer.xml",
    "java/res/layout/two_field_date_picker.xml",
    "java/res/menu/select_action_menu.xml",
    "java/res/values-v17/styles.xml",
    "java/res/values-v21/styles.xml",
    "java/res/values/attrs.xml",
    "java/res/values/dimens.xml",
    "java/res/values/strings.xml",
  ]
}

action_with_pydeps("generate_sandboxed_service_srcjar") {
  script = "//content/public/android/generate_child_service.py"

  _srcjar_path = "${target_gen_dir}/${target_name}.srcjar"
  _rebased_srcjar_path = rebase_path(_srcjar_path, root_build_dir)

  args = [
    "40",
    _rebased_srcjar_path,
  ]
  outputs = [ _srcjar_path ]
}

java_group("content_java") {
  deps = [
    ":content_full_java",
    ":content_main_dex_java",
  ]
}

# The minimal //content code needed for the base module. This includes all code
# needed in child processes.
android_library("content_main_dex_java") {
  deps = [
    ":content_java_resources",
    "//base:base_java",
    "//base:jni_java",
    "//build/android:build_java",
    "//components/version_info/android:version_constants_java",
    "//third_party/android_deps:com_google_code_findbugs_jsr305_java",
    "//third_party/androidx:androidx_annotation_annotation_java",
    "//ui/android:ui_no_recycler_view_java",
  ]
  sources = [
    "java/src/org/chromium/content/app/ContentChildProcessService.java",
    "java/src/org/chromium/content/app/ContentChildProcessServiceDelegate.java",
    "java/src/org/chromium/content/app/ContentMain.java",
    "java/src/org/chromium/content/app/KillChildUncaughtExceptionHandler.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService0.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService1.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService2.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService3.java",
    "java/src/org/chromium/content/app/PrivilegedProcessService4.java",
    "java/src/org/chromium/content/app/SandboxedProcessService.java",
    "java/src/org/chromium/content/browser/BrowserStartupControllerImpl.java",
    "java/src/org/chromium/content/browser/ChildProcessCreationParamsImpl.java",
    "java/src/org/chromium/content/browser/ContentChildProcessConstants.java",
    "java/src/org/chromium/content/browser/DeviceUtilsImpl.java",
    "java/src/org/chromium/content/browser/ServicificationStartupUma.java",
    "java/src/org/chromium/content/browser/TracingControllerAndroidImpl.java",
    "java/src/org/chromium/content/browser/UiThreadTaskTraitsImpl.java",
    "java/src/org/chromium/content/common/ContentSwitchUtils.java",
    "java/src/org/chromium/content/common/SurfaceWrapper.java",
    "java/src/org/chromium/content_public/app/ChildProcessServiceFactory.java",
    "java/src/org/chromium/content_public/app/ZygotePreload.java",
    "java/src/org/chromium/content_public/browser/BrowserStartupController.java",
    "java/src/org/chromium/content_public/browser/BrowserTaskExecutor.java",
    "java/src/org/chromium/content_public/browser/ChildProcessCreationParams.java",
    "java/src/org/chromium/content_public/browser/DeviceUtils.java",
    "java/src/org/chromium/content_public/browser/TracingControllerAndroid.java",
    "java/src/org/chromium/content_public/browser/UiThreadTaskTraits.java",
    "java/src/org/chromium/content_public/common/ContentProcessInfo.java",
    "java/src/org/chromium/content_public/common/ContentUrlConstants.java",
    "java/src/org/chromium/content_public/common/Referrer.java",
    "java/src/org/chromium/content_public/common/ResourceRequestBody.java",
    "java/src/org/chromium/content_public/common/ScreenOrientationConstants.java",
  ]
  resources_package = "org.chromium.content"
  srcjar_deps = [
    ":common_aidl",
    ":content_public_android_java_enums_srcjar",
    ":content_public_android_java_switches_srcjar",
    ":generate_sandboxed_service_srcjar",
  ]
  annotation_processor_deps = [ "//base/android/jni_generator:jni_processor" ]
}

android_library("content_full_java") {
  deps = [
    ":content_main_dex_java",
    "$google_play_services_package:google_play_services_auth_api_phone_java",
    "$google_play_services_package:google_play_services_base_java",
    "$google_play_services_package:google_play_services_basement_java",
    "$google_play_services_package:google_play_services_tasks_java",
    "//base:base_java",
    "//base:jni_java",
    "//build:chromeos_buildflags",
    "//build/android:build_java",
    "//components/download/public/common:public_java",
    "//components/payments/mojom:mojom_java",
    "//content/public/common:common_java",
    "//content/public/common:trust_tokens_mojo_bindings_java",
    "//device/bluetooth:java",
    "//device/gamepad:java",
    "//media/base/android:media_java",
    "//media/capture/content/android:screen_capture_java",
    "//media/capture/video/android:capture_java",
    "//media/midi:midi_java",
    "//media/mojo/mojom:mojom_java",
    "//mojo/public/java:base_java",
    "//mojo/public/java:bindings_java",
    "//mojo/public/java:system_java",
    "//mojo/public/java/system:system_impl_java",
    "//mojo/public/mojom/base:base_java",
    "//net/android:net_java",
    "//services/device:java",
    "//services/device/public/java:nfc_java",
    "//services/device/public/mojom:mojom_java",
    "//services/media_session/public/cpp/android:media_session_java",
    "//services/service_manager/public/java:service_manager_java",
    "//services/service_manager/public/mojom:mojom_java",
    "//services/shape_detection:shape_detection_java",
    "//services/shape_detection/public/mojom:mojom_java",
    "//skia/public/mojom:mojom_java",
    "//third_party/android_deps:com_google_code_findbugs_jsr305_java",
    "//third_party/androidx:androidx_annotation_annotation_java",
    "//third_party/androidx:androidx_collection_collection_java",
    "//third_party/androidx:androidx_core_core_java",
    "//third_party/blink/public:blink_headers_java",
    "//third_party/blink/public/common:common_java",
    "//third_party/blink/public/mojom:android_mojo_bindings_java",
    "//third_party/blink/public/mojom:mojom_core_java",
    "//third_party/blink/public/mojom:mojom_platform_java",
    "//ui/android:ui_no_recycler_view_java",
    "//ui/android:ui_utils_java",
    "//ui/base/ime/mojom:mojom_java",
    "//ui/gfx/geometry/mojom:mojom_java",
    "//url:gurl_java",
    "//url:origin_java",
  ]
  srcjar_deps = [
    ":is_ready_to_pay_service_aidl",
    "//content/browser:client_data_json_generated_enum",
    "//content/browser/accessibility:content_browser_accessibility_java_enums_srcjar",
    "//content/browser/sms:sms_provider_gms_backend_enum",
    "//content/public/browser:bluetooth_chooser_event_javagen",
    "//ui/touch_selection:ui_touch_handle_orientation_srcjar",
    "//ui/touch_selection:ui_touch_selection_enums_srcjar",
  ]

  sources = [
    "java/src/org/chromium/content/browser/AppWebMessagePort.java",
    "java/src/org/chromium/content/browser/AudioFocusDelegate.java",
    "java/src/org/chromium/content/browser/BackgroundSyncNetworkObserver.java",
    "java/src/org/chromium/content/browser/BindingManager.java",
    "java/src/org/chromium/content/browser/BrowserContextHandleImpl.java",
    "java/src/org/chromium/content/browser/ChildProcessConnectionMetrics.java",
    "java/src/org/chromium/content/browser/ChildProcessLauncherHelperImpl.java",
    "java/src/org/chromium/content/browser/ChildProcessRanking.java",
    "java/src/org/chromium/content/browser/ClientDataJsonImpl.java",
    "java/src/org/chromium/content/browser/ContactsDialogHost.java",
    "java/src/org/chromium/content/browser/ContentClassFactory.java",
    "java/src/org/chromium/content/browser/ContentFeatureListImpl.java",
    "java/src/org/chromium/content/browser/ContentNfcDelegate.java",
    "java/src/org/chromium/content/browser/ContentUiEventHandler.java",
    "java/src/org/chromium/content/browser/ContentViewStaticsImpl.java",
    "java/src/org/chromium/content/browser/Gamepad.java",
    "java/src/org/chromium/content/browser/GestureListenerManagerImpl.java",
    "java/src/org/chromium/content/browser/GpuProcessCallback.java",
    "java/src/org/chromium/content/browser/HostZoomMapImpl.java",
    "java/src/org/chromium/content/browser/InterfaceRegistrarImpl.java",
    "java/src/org/chromium/content/browser/JavascriptInjectorImpl.java",
    "java/src/org/chromium/content/browser/JavascriptInterface.java",
    "java/src/org/chromium/content/browser/JoystickHandler.java",
    "java/src/org/chromium/content/browser/LauncherThread.java",
    "java/src/org/chromium/content/browser/MediaSessionImpl.java",
    "java/src/org/chromium/content/browser/MessagePayloadJni.java",
    "java/src/org/chromium/content/browser/MotionEventSynthesizerImpl.java",
    "java/src/org/chromium/content/browser/NfcHost.java",
    "java/src/org/chromium/content/browser/PopupController.java",
    "java/src/org/chromium/content/browser/RenderCoordinatesImpl.java",
    "java/src/org/chromium/content/browser/RenderWidgetHostViewImpl.java",
    "java/src/org/chromium/content/browser/ScreenOrientationProviderImpl.java",
    "java/src/org/chromium/content/browser/SpareChildConnection.java",
    "java/src/org/chromium/content/browser/SpeechRecognitionImpl.java",
    "java/src/org/chromium/content/browser/SyntheticGestureTarget.java",
    "java/src/org/chromium/content/browser/TtsPlatformImpl.java",
    "java/src/org/chromium/content/browser/ViewEventSinkImpl.java",
    "java/src/org/chromium/content/browser/WindowEventObserver.java",
    "java/src/org/chromium/content/browser/WindowEventObserverManager.java",
    "java/src/org/chromium/content/browser/accessibility/AccessibilityActionAndEventTracker.java",
    "java/src/org/chromium/content/browser/accessibility/AccessibilityDelegate.java",
    "java/src/org/chromium/content/browser/accessibility/AccessibilityEventDispatcher.java",
    "java/src/org/chromium/content/browser/accessibility/AccessibilityHistogramRecorder.java",
    "java/src/org/chromium/content/browser/accessibility/AccessibilityNodeInfoUtils.java",
    "java/src/org/chromium/content/browser/accessibility/BrowserAccessibilityState.java",
    "java/src/org/chromium/content/browser/accessibility/OViewStructureBuilder.java",
    "java/src/org/chromium/content/browser/accessibility/ViewStructureBuilder.java",
    "java/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityDelegate.java",
    "java/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityImpl.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/CaptioningBridge.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/CaptioningChangeDelegate.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/CaptioningController.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/CaptioningStyle.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/SystemCaptioningBridge.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/TextTrackSettings.java",
    "java/src/org/chromium/content/browser/androidoverlay/AndroidOverlayProviderImpl.java",
    "java/src/org/chromium/content/browser/androidoverlay/DialogOverlayCore.java",
    "java/src/org/chromium/content/browser/androidoverlay/DialogOverlayImpl.java",
    "java/src/org/chromium/content/browser/font/AndroidFontLookupImpl.java",
    "java/src/org/chromium/content/browser/font/FontsContractWrapper.java",
    "java/src/org/chromium/content/browser/framehost/NavigationControllerImpl.java",
    "java/src/org/chromium/content/browser/framehost/RenderFrameHostDelegate.java",
    "java/src/org/chromium/content/browser/framehost/RenderFrameHostImpl.java",
    "java/src/org/chromium/content/browser/input/ChromiumBaseInputConnection.java",
    "java/src/org/chromium/content/browser/input/CursorAnchorInfoController.java",
    "java/src/org/chromium/content/browser/input/DateTimeChooserAndroid.java",
    "java/src/org/chromium/content/browser/input/ImeAdapterImpl.java",
    "java/src/org/chromium/content/browser/input/ImeUtils.java",
    "java/src/org/chromium/content/browser/input/InputMethodManagerWrapperImpl.java",
    "java/src/org/chromium/content/browser/input/Range.java",
    "java/src/org/chromium/content/browser/input/SelectPopup.java",
    "java/src/org/chromium/content/browser/input/SelectPopupAdapter.java",
    "java/src/org/chromium/content/browser/input/SelectPopupDialog.java",
    "java/src/org/chromium/content/browser/input/SelectPopupDropdown.java",
    "java/src/org/chromium/content/browser/input/SelectPopupItem.java",
    "java/src/org/chromium/content/browser/input/SpellCheckPopupWindow.java",
    "java/src/org/chromium/content/browser/input/SuggestionInfo.java",
    "java/src/org/chromium/content/browser/input/SuggestionsPopupWindow.java",
    "java/src/org/chromium/content/browser/input/TextInputState.java",
    "java/src/org/chromium/content/browser/input/TextSuggestionHost.java",
    "java/src/org/chromium/content/browser/input/TextSuggestionsPopupWindow.java",
    "java/src/org/chromium/content/browser/input/ThreadedInputConnection.java",
    "java/src/org/chromium/content/browser/input/ThreadedInputConnectionFactory.java",
    "java/src/org/chromium/content/browser/input/ThreadedInputConnectionProxyView.java",
    "java/src/org/chromium/content/browser/picker/DateDialogNormalizer.java",
    "java/src/org/chromium/content/browser/picker/DatePickerDialogCompat.java",
    "java/src/org/chromium/content/browser/picker/DateTimePickerDialog.java",
    "java/src/org/chromium/content/browser/picker/DateTimeSuggestion.java",
    "java/src/org/chromium/content/browser/picker/DateTimeSuggestionListAdapter.java",
    "java/src/org/chromium/content/browser/picker/InputDialogContainer.java",
    "java/src/org/chromium/content/browser/picker/MonthPicker.java",
    "java/src/org/chromium/content/browser/picker/MonthPickerDialog.java",
    "java/src/org/chromium/content/browser/picker/MultiFieldTimePickerDialog.java",
    "java/src/org/chromium/content/browser/picker/TwoFieldDatePicker.java",
    "java/src/org/chromium/content/browser/picker/TwoFieldDatePickerDialog.java",
    "java/src/org/chromium/content/browser/picker/WeekPicker.java",
    "java/src/org/chromium/content/browser/picker/WeekPickerDialog.java",
    "java/src/org/chromium/content/browser/remoteobjects/RemoteObjectAuditorImpl.java",
    "java/src/org/chromium/content/browser/remoteobjects/RemoteObjectHostImpl.java",
    "java/src/org/chromium/content/browser/remoteobjects/RemoteObjectImpl.java",
    "java/src/org/chromium/content/browser/remoteobjects/RemoteObjectInjector.java",
    "java/src/org/chromium/content/browser/remoteobjects/RemoteObjectRegistry.java",
    "java/src/org/chromium/content/browser/selection/AdditionalMenuItemProvider.java",
    "java/src/org/chromium/content/browser/selection/AdditionalMenuItemProviderImpl.java",
    "java/src/org/chromium/content/browser/selection/FloatingPastePopupMenu.java",
    "java/src/org/chromium/content/browser/selection/LGEmailActionModeWorkaroundImpl.java",
    "java/src/org/chromium/content/browser/selection/MagnifierAnimator.java",
    "java/src/org/chromium/content/browser/selection/MagnifierWrapper.java",
    "java/src/org/chromium/content/browser/selection/MagnifierWrapperImpl.java",
    "java/src/org/chromium/content/browser/selection/PastePopupMenu.java",
    "java/src/org/chromium/content/browser/selection/SelectionIndicesConverter.java",
    "java/src/org/chromium/content/browser/selection/SelectionInsertionHandleObserver.java",
    "java/src/org/chromium/content/browser/selection/SelectionPopupControllerImpl.java",
    "java/src/org/chromium/content/browser/selection/SmartSelectionClient.java",
    "java/src/org/chromium/content/browser/selection/SmartSelectionEventProcessor.java",
    "java/src/org/chromium/content/browser/selection/SmartSelectionProvider.java",
    "java/src/org/chromium/content/browser/sms/SmsProviderGms.java",
    "java/src/org/chromium/content/browser/sms/SmsUserConsentReceiver.java",
    "java/src/org/chromium/content/browser/sms/SmsVerificationReceiver.java",
    "java/src/org/chromium/content/browser/sms/Wrappers.java",
    "java/src/org/chromium/content/browser/webcontents/EmptyInternalAccessDelegate.java",
    "java/src/org/chromium/content/browser/webcontents/WebContentsImpl.java",
    "java/src/org/chromium/content/browser/webcontents/WebContentsObserverProxy.java",
    "java/src/org/chromium/content_public/browser/ActionModeCallbackHelper.java",
    "java/src/org/chromium/content_public/browser/BrowserContextHandle.java",
    "java/src/org/chromium/content_public/browser/ChildProcessLauncherHelper.java",
    "java/src/org/chromium/content_public/browser/ClientDataJson.java",
    "java/src/org/chromium/content_public/browser/ContactsPicker.java",
    "java/src/org/chromium/content_public/browser/ContactsPickerDelegate.java",
    "java/src/org/chromium/content_public/browser/ContactsPickerListener.java",
    "java/src/org/chromium/content_public/browser/ContentFeatureList.java",
    "java/src/org/chromium/content_public/browser/ContentViewStatics.java",
    "java/src/org/chromium/content_public/browser/GestureListenerManager.java",
    "java/src/org/chromium/content_public/browser/GestureStateListener.java",
    "java/src/org/chromium/content_public/browser/GestureStateListenerWithScroll.java",
    "java/src/org/chromium/content_public/browser/GlobalRenderFrameHostId.java",
    "java/src/org/chromium/content_public/browser/HostZoomMap.java",
    "java/src/org/chromium/content_public/browser/ImageDownloadCallback.java",
    "java/src/org/chromium/content_public/browser/ImeAdapter.java",
    "java/src/org/chromium/content_public/browser/ImeEventObserver.java",
    "java/src/org/chromium/content_public/browser/InputMethodManagerWrapper.java",
    "java/src/org/chromium/content_public/browser/InterfaceRegistrar.java",
    "java/src/org/chromium/content_public/browser/JavaScriptCallback.java",
    "java/src/org/chromium/content_public/browser/JavascriptInjector.java",
    "java/src/org/chromium/content_public/browser/LGEmailActionModeWorkaround.java",
    "java/src/org/chromium/content_public/browser/LoadCommittedDetails.java",
    "java/src/org/chromium/content_public/browser/LoadUrlParams.java",
    "java/src/org/chromium/content_public/browser/MediaSession.java",
    "java/src/org/chromium/content_public/browser/MediaSessionObserver.java",
    "java/src/org/chromium/content_public/browser/MessagePayload.java",
    "java/src/org/chromium/content_public/browser/MessagePort.java",
    "java/src/org/chromium/content_public/browser/MotionEventSynthesizer.java",
    "java/src/org/chromium/content_public/browser/NavigationController.java",
    "java/src/org/chromium/content_public/browser/NavigationEntry.java",
    "java/src/org/chromium/content_public/browser/NavigationHandle.java",
    "java/src/org/chromium/content_public/browser/NavigationHistory.java",
    "java/src/org/chromium/content_public/browser/PermissionsPolicyFeature.java",
    "java/src/org/chromium/content_public/browser/RenderCoordinates.java",
    "java/src/org/chromium/content_public/browser/RenderFrameHost.java",
    "java/src/org/chromium/content_public/browser/RenderWidgetHostView.java",
    "java/src/org/chromium/content_public/browser/ScreenOrientationDelegate.java",
    "java/src/org/chromium/content_public/browser/ScreenOrientationProvider.java",
    "java/src/org/chromium/content_public/browser/SelectAroundCaretResult.java",
    "java/src/org/chromium/content_public/browser/SelectionClient.java",
    "java/src/org/chromium/content_public/browser/SelectionEventProcessor.java",
    "java/src/org/chromium/content_public/browser/SelectionPopupController.java",
    "java/src/org/chromium/content_public/browser/SmartClipProvider.java",
    "java/src/org/chromium/content_public/browser/SpeechRecognition.java",
    "java/src/org/chromium/content_public/browser/StylusWritingHandler.java",
    "java/src/org/chromium/content_public/browser/StylusWritingImeCallback.java",
    "java/src/org/chromium/content_public/browser/ViewEventSink.java",
    "java/src/org/chromium/content_public/browser/WebAuthenticationDelegate.java",
    "java/src/org/chromium/content_public/browser/WebContents.java",
    "java/src/org/chromium/content_public/browser/WebContentsAccessibility.java",
    "java/src/org/chromium/content_public/browser/WebContentsInternals.java",
    "java/src/org/chromium/content_public/browser/WebContentsObserver.java",
    "java/src/org/chromium/content_public/browser/WebContentsStatics.java",
    "java/src/org/chromium/content_public/browser/trusttokens/TrustTokenFulfillerManager.java",
  ]
  annotation_processor_deps = [ "//base/android/jni_generator:jni_processor" ]
}

java_strings_grd("content_strings_grd") {
  grd_file = "java/strings/android_content_strings.grd"
  outputs = [ "values/android_content_strings.xml" ] +
            process_file_template(
                android_bundle_locales_as_resources,
                [ "values-{{source_name_part}}/android_content_strings.xml" ])
}

java_cpp_enum("content_public_android_java_enums_srcjar") {
  sources = [
    "//content/browser/android/select_popup.cc",
    "//content/public/browser/android/child_process_importance.h",
    "//content/public/browser/android/message_payload_type.h",
    "//content/public/browser/android/motion_event_action.h",
    "//content/public/browser/bluetooth_scanning_prompt.h",
    "//content/public/browser/browser_task_traits.h",
    "//content/public/browser/browsing_data_remover.h",
    "//content/public/browser/invalidate_type.h",
    "//content/public/browser/navigation_controller.h",
    "//content/public/browser/overlay_window.h",
    "//content/public/browser/render_frame_host.h",
    "//content/public/browser/visibility.h",
    "//content/public/common/console_message_level.h",
  ]
}

java_cpp_strings("content_public_android_java_switches_srcjar") {
  sources = [ "//content/public/common/content_switches.cc" ]
  template = "//content/common/android/java_templates/ContentSwitches.java.tmpl"
}

generate_jar_jni("jar_jni") {
  classes = [
    "java/util/HashSet.class",
    "android/view/DragEvent.class",
    "android/view/MotionEvent.class",
  ]
}

generate_jni("content_jni_headers") {
  sources = [
    "java/src/org/chromium/content/app/ContentChildProcessServiceDelegate.java",
    "java/src/org/chromium/content/app/ContentMain.java",
    "java/src/org/chromium/content/browser/AppWebMessagePort.java",
    "java/src/org/chromium/content/browser/AudioFocusDelegate.java",
    "java/src/org/chromium/content/browser/BackgroundSyncNetworkObserver.java",
    "java/src/org/chromium/content/browser/BrowserContextHandleImpl.java",
    "java/src/org/chromium/content/browser/BrowserStartupControllerImpl.java",
    "java/src/org/chromium/content/browser/ChildProcessLauncherHelperImpl.java",
    "java/src/org/chromium/content/browser/ClientDataJsonImpl.java",
    "java/src/org/chromium/content/browser/ContactsDialogHost.java",
    "java/src/org/chromium/content/browser/ContentFeatureListImpl.java",
    "java/src/org/chromium/content/browser/ContentNfcDelegate.java",
    "java/src/org/chromium/content/browser/ContentUiEventHandler.java",
    "java/src/org/chromium/content/browser/ContentViewStaticsImpl.java",
    "java/src/org/chromium/content/browser/GestureListenerManagerImpl.java",
    "java/src/org/chromium/content/browser/GpuProcessCallback.java",
    "java/src/org/chromium/content/browser/HostZoomMapImpl.java",
    "java/src/org/chromium/content/browser/InterfaceRegistrarImpl.java",
    "java/src/org/chromium/content/browser/JavascriptInjectorImpl.java",
    "java/src/org/chromium/content/browser/LauncherThread.java",
    "java/src/org/chromium/content/browser/MediaSessionImpl.java",
    "java/src/org/chromium/content/browser/MessagePayloadJni.java",
    "java/src/org/chromium/content/browser/NfcHost.java",
    "java/src/org/chromium/content/browser/RenderWidgetHostViewImpl.java",
    "java/src/org/chromium/content/browser/ScreenOrientationProviderImpl.java",
    "java/src/org/chromium/content/browser/SpeechRecognitionImpl.java",
    "java/src/org/chromium/content/browser/SyntheticGestureTarget.java",
    "java/src/org/chromium/content/browser/TracingControllerAndroidImpl.java",
    "java/src/org/chromium/content/browser/TtsPlatformImpl.java",
    "java/src/org/chromium/content/browser/accessibility/BrowserAccessibilityState.java",
    "java/src/org/chromium/content/browser/accessibility/ViewStructureBuilder.java",
    "java/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityImpl.java",
    "java/src/org/chromium/content/browser/accessibility/captioning/CaptioningController.java",
    "java/src/org/chromium/content/browser/androidoverlay/AndroidOverlayProviderImpl.java",
    "java/src/org/chromium/content/browser/androidoverlay/DialogOverlayImpl.java",
    "java/src/org/chromium/content/browser/framehost/NavigationControllerImpl.java",
    "java/src/org/chromium/content/browser/framehost/RenderFrameHostImpl.java",
    "java/src/org/chromium/content/browser/input/DateTimeChooserAndroid.java",
    "java/src/org/chromium/content/browser/input/ImeAdapterImpl.java",
    "java/src/org/chromium/content/browser/input/SelectPopup.java",
    "java/src/org/chromium/content/browser/input/SuggestionInfo.java",
    "java/src/org/chromium/content/browser/input/TextSuggestionHost.java",
    "java/src/org/chromium/content/browser/selection/SelectionPopupControllerImpl.java",
    "java/src/org/chromium/content/browser/selection/SmartSelectionClient.java",
    "java/src/org/chromium/content/browser/sms/SmsProviderGms.java",
    "java/src/org/chromium/content/browser/webcontents/WebContentsImpl.java",
    "java/src/org/chromium/content/browser/webcontents/WebContentsObserverProxy.java",
    "java/src/org/chromium/content/common/SurfaceWrapper.java",
    "java/src/org/chromium/content_public/browser/LoadCommittedDetails.java",
    "java/src/org/chromium/content_public/browser/LoadUrlParams.java",
    "java/src/org/chromium/content_public/browser/NavigationHandle.java",
    "java/src/org/chromium/content_public/browser/WebAuthenticationDelegate.java",
    "java/src/org/chromium/content_public/common/ResourceRequestBody.java",
  ]
}

group("jni") {
  public_deps = [
    ":content_jni_headers",
    ":jar_jni",
  ]
}

android_library("content_javatests") {
  testonly = true

  deps = [
    ":content_java",
    "//base:base_java",
    "//base:base_java_test_support",
    "//content/public/test/android:content_java_test_support",
    "//content/shell/android:content_shell_apk_java",
    "//content/shell/android:content_shell_java",
    "//content/shell/android:content_shell_test_java",
    "//media/base/android:media_java",
    "//media/capture/content/android:screen_capture_java",
    "//media/capture/video/android:capture_java",
    "//media/mojo/mojom:mojom_java",
    "//mojo/public/interfaces/bindings/tests:test_interfaces_java",
    "//mojo/public/java:bindings_java",
    "//mojo/public/java:system_java",
    "//mojo/public/java/system:system_impl_java",
    "//mojo/public/java/system:test_support_java",
    "//mojo/public/mojom/base:base_java",
    "//net/android:net_java",
    "//net/android:net_java_test_support",
    "//services/device/public/java:geolocation_java",
    "//services/device/public/java:geolocation_java_test_support",
    "//services/device/public/mojom:mojom_java",
    "//services/service_manager/public/java:service_manager_java",
    "//services/test/echo/public/mojom:mojom_java",
    "//third_party/android_deps:com_google_code_findbugs_jsr305_java",
    "//third_party/android_deps:guava_android_java",
    "//third_party/android_sdk:android_test_base_java",
    "//third_party/android_sdk:android_test_mock_java",
    "//third_party/android_sdk:android_test_runner_java",
    "//third_party/android_support_test_runner:rules_java",
    "//third_party/android_support_test_runner:runner_java",
    "//third_party/androidx:androidx_annotation_annotation_java",
    "//third_party/androidx:androidx_collection_collection_java",
    "//third_party/androidx:androidx_core_core_java",
    "//third_party/androidx:androidx_test_runner_java",
    "//third_party/blink/public:blink_headers_java",
    "//third_party/blink/public/mojom:android_mojo_bindings_java",
    "//third_party/hamcrest:hamcrest_java",
    "//third_party/junit",
    "//third_party/mockito:mockito_java",
    "//ui/android:ui_java",
    "//ui/android:ui_java_test_support",
    "//ui/base/cursor/mojom:cursor_type_java",
    "//ui/base/ime/mojom:mojom_java",
    "//ui/gfx/geometry/mojom:mojom_java",
    "//url:gurl_java",
  ]

  sources = [
    "javatests/src/org/chromium/content/browser/BrowserStartupControllerTest.java",
    "javatests/src/org/chromium/content/browser/ChildProcessLauncherHelperTest.java",
    "javatests/src/org/chromium/content/browser/ChildProcessLauncherIntegrationTest.java",
    "javatests/src/org/chromium/content/browser/ChildProcessLauncherTest.java",
    "javatests/src/org/chromium/content/browser/ClipboardTest.java",
    "javatests/src/org/chromium/content/browser/ContactsProviderTest.java",
    "javatests/src/org/chromium/content/browser/ContentCommandLineTest.java",
    "javatests/src/org/chromium/content/browser/ContentTextSelectionTest.java",
    "javatests/src/org/chromium/content/browser/ContentViewLocationTest.java",
    "javatests/src/org/chromium/content/browser/ContentViewPointerTypeTest.java",
    "javatests/src/org/chromium/content/browser/ContentViewScrollingTest.java",
    "javatests/src/org/chromium/content/browser/CriteriaHelperTest.java",
    "javatests/src/org/chromium/content/browser/EncodeHtmlDataUriTest.java",
    "javatests/src/org/chromium/content/browser/GestureDetectorResetTest.java",
    "javatests/src/org/chromium/content/browser/GestureListenerManagerTest.java",
    "javatests/src/org/chromium/content/browser/ImportantFileWriterAndroidTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeActivityTestRule.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeArrayCoercionTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeArrayTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeBareboneTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeBasicsTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeChildFrameTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeCoercionTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeFieldsTest.java",
    "javatests/src/org/chromium/content/browser/JavaBridgeReturnValuesTest.java",
    "javatests/src/org/chromium/content/browser/MediaSessionTest.java",
    "javatests/src/org/chromium/content/browser/NavigationTest.java",
    "javatests/src/org/chromium/content/browser/ScreenOrientationListenerTest.java",
    "javatests/src/org/chromium/content/browser/TestsJavaScriptEvalTest.java",
    "javatests/src/org/chromium/content/browser/TracingControllerAndroidImplTest.java",
    "javatests/src/org/chromium/content/browser/VSyncPausedTest.java",
    "javatests/src/org/chromium/content/browser/VideoFullscreenOrientationLockTest.java",
    "javatests/src/org/chromium/content/browser/VideoRotateToFullscreenTest.java",
    "javatests/src/org/chromium/content/browser/ViewportTest.java",
    "javatests/src/org/chromium/content/browser/WakeLockTest.java",
    "javatests/src/org/chromium/content/browser/WebContentsObserverAndroidTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/AccessibilityContentShellActivityTestRule.java",
    "javatests/src/org/chromium/content/browser/accessibility/AccessibilityContentShellTestData.java",
    "javatests/src/org/chromium/content/browser/accessibility/AccessibilityContentShellTestUtils.java",
    "javatests/src/org/chromium/content/browser/accessibility/AccessibilityEventDispatcherTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/AssistViewStructureTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/TestViewStructure.java",
    "javatests/src/org/chromium/content/browser/accessibility/TestViewStructureFactory.java",
    "javatests/src/org/chromium/content/browser/accessibility/TestViewStructureInterface.java",
    "javatests/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityEventsTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/WebContentsAccessibilityTreeTest.java",
    "javatests/src/org/chromium/content/browser/accessibility/captioning/CaptioningChangeDelegateTest.java",
    "javatests/src/org/chromium/content/browser/androidoverlay/DialogOverlayImplPixelTest.java",
    "javatests/src/org/chromium/content/browser/androidoverlay/DialogOverlayImplTest.java",
    "javatests/src/org/chromium/content/browser/androidoverlay/DialogOverlayImplTestRule.java",
    "javatests/src/org/chromium/content/browser/font/AndroidFontLookupImplTest.java",
    "javatests/src/org/chromium/content/browser/input/CursorAnchorInfoControllerTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeActivityTestRule.java",
    "javatests/src/org/chromium/content/browser/input/ImeAutocapitalizeTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeInputActionTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeInputModeTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeInputVKApiTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeLollipopTest.java",
    "javatests/src/org/chromium/content/browser/input/ImePasswordTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeTest.java",
    "javatests/src/org/chromium/content/browser/input/ImeTestUtils.java",
    "javatests/src/org/chromium/content/browser/input/InputDialogContainerTest.java",
    "javatests/src/org/chromium/content/browser/input/SelectPopupTest.java",
    "javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
    "javatests/src/org/chromium/content/browser/picker/DateTimePickerDialogTest.java",
    "javatests/src/org/chromium/content/browser/remoteobjects/RemoteObjectHostImplTest.java",
    "javatests/src/org/chromium/content/browser/scheduler/NativePostTaskTest.java",
    "javatests/src/org/chromium/content/browser/scheduler/UiThreadSchedulerTest.java",
    "javatests/src/org/chromium/content/browser/webcontents/WebContentsTest.java",
  ]

  data = [
    "//content/test/data/accessibility/accname/",
    "//content/test/data/accessibility/aria/",
    "//content/test/data/accessibility/css/",
    "//content/test/data/accessibility/event/",
    "//content/test/data/accessibility/html/",
    "//content/test/data/android/",
    "//content/test/data/media/",
  ]
  data_deps = [ "//net:test_support" ]
}

robolectric_binary("content_junit_tests") {
  sources = [
    "junit/src/org/chromium/content/browser/BindingManagerTest.java",
    "junit/src/org/chromium/content/browser/ChildProcessConnectionMetricsUnitTest.java",
    "junit/src/org/chromium/content/browser/ChildProcessRankingTest.java",
    "junit/src/org/chromium/content/browser/GestureListenerManagerImplUnitTest.java",
    "junit/src/org/chromium/content/browser/ScreenOrientationProviderImplTest.java",
    "junit/src/org/chromium/content/browser/SpareChildConnectionTest.java",
    "junit/src/org/chromium/content/browser/UiThreadTaskTraitsImplTest.java",
    "junit/src/org/chromium/content/browser/androidoverlay/DialogOverlayCoreTest.java",
    "junit/src/org/chromium/content/browser/input/InputMethodManagerWrapperImplTest.java",
    "junit/src/org/chromium/content/browser/input/RangeTest.java",
    "junit/src/org/chromium/content/browser/input/TextInputStateTest.java",
    "junit/src/org/chromium/content/browser/input/ThreadedInputConnectionFactoryTest.java",
    "junit/src/org/chromium/content/browser/input/ThreadedInputConnectionTest.java",
    "junit/src/org/chromium/content/browser/picker/DateDialogNormalizerTest.java",
    "junit/src/org/chromium/content/browser/remoteobjects/RemoteObjectImplTest.java",
    "junit/src/org/chromium/content/browser/remoteobjects/RemoteObjectRegistryTest.java",
    "junit/src/org/chromium/content/browser/selection/MagnifierAnimatorTest.java",
    "junit/src/org/chromium/content/browser/selection/SelectionPopupControllerTest.java",
    "junit/src/org/chromium/content/browser/selection/SmartSelectionEventProcessorTest.java",
    "junit/src/org/chromium/content/browser/sms/SmsProviderGmsTest.java",
    "junit/src/org/chromium/content/browser/webcontents/WebContentsImplTest.java",
    "junit/src/org/chromium/content_public/browser/MessagePayloadTest.java",
  ]

  deps = [
    ":content_java",
    "//base:base_java",
    "//base:base_java_process_launcher_test_support",
    "//base:base_java_test_support",
    "//base:base_junit_test_support",
    "//content/public/common:common_java",
    "//content/public/test/android:content_java_test_support",
    "//media/mojo/mojom:mojom_java",
    "//mojo/public/java:base_java",
    "//mojo/public/java:bindings_java",
    "//mojo/public/mojom/base:base_java",
    "//services/device/public/mojom:mojom_java",
    "//third_party/androidx:androidx_test_core_java",
    "//third_party/androidx:androidx_test_runner_java",
    "//third_party/blink/public/mojom:android_mojo_bindings_java",
    "//third_party/blink/public/mojom:mojom_platform_java",
    "//third_party/hamcrest:hamcrest_java",
    "//third_party/junit",
    "//third_party/mockito:mockito_java",
    "//ui/android:ui_java",
    "//ui/gfx/geometry/mojom:mojom_java",
  ]
  data_deps = [ "//testing/buildbot/filters:content_junit_tests_filters" ]
}
